{"version":3,"file":"guardian.js","sources":["../src/error/index.js","../src/parser/index.js","../src/pipe/index.js","../src/guardians/string.js"],"sourcesContent":["export class GuardianError extends Error {\r\n    constructor(message = \"\", guard = null, value) {\r\n        super(message);\r\n\r\n        this.message = message;\r\n        this.name = guard;\r\n        this.value = value;\r\n    }\r\n}","/*\r\n* Parse data by scheme\r\n* Function return parsed data.\r\n* if the data does not match the scheme, the parser throws an error with the GuardianParseError object\r\n* @param {object}: schema - schema object\r\n* @param {any}: data - user input\r\n* @return {any} Parsed data\r\n* */\r\nimport {GuardianError} from \"../error/index.js\";\r\n\r\nconst parse = (schema, data) => {\r\n    let result\r\n\r\n    if (!schema) {\r\n        throw new Error(`Schema object required for parse data!`)\r\n    }\r\n\r\n    if (typeof schema === \"function\") {\r\n        result = schema.apply(null, [data])\r\n        if (result instanceof GuardianError) {\r\n            throw result\r\n        }\r\n    } else {\r\n        for(let key in schema){\r\n            const value = data[key]\r\n            const guard = schema[key]\r\n\r\n            if (!guard) {continue}\r\n\r\n            if (typeof guard === \"function\") {\r\n                result = guard.apply(null, [data])\r\n                if (result instanceof GuardianError) {\r\n                    throw result\r\n                }\r\n            } else {\r\n                parse(guard, value)\r\n            }\r\n        }\r\n    }\r\n\r\n    return data\r\n}\r\n\r\nconst safeParse = (schema, data) => {\r\n    let result\r\n\r\n    if (!schema) {\r\n        throw new Error(`Schema object required for parse data!`)\r\n    }\r\n\r\n    if (typeof schema === \"function\") {\r\n        result = schema.apply(null, [data])\r\n        if (result instanceof GuardianError) {\r\n            return {\r\n                ok: false,\r\n                error: result\r\n            }\r\n        }\r\n    } else {\r\n        for(let key in schema){\r\n            const value = data[key]\r\n            const guard = schema[key]\r\n\r\n            if (!guard) {continue}\r\n\r\n            if (typeof guard === \"function\") {\r\n                result = guard.apply(null, [data])\r\n                if (result instanceof GuardianError) {\r\n                    return {\r\n                        ok: false,\r\n                        error: result\r\n                    }\r\n                }\r\n            } else {\r\n                parse(guard, value)\r\n            }\r\n        }\r\n    }\r\n\r\n    return {\r\n        ok: true,\r\n        output: data\r\n    }\r\n}\r\n\r\nexport {\r\n    parse,\r\n    safeParse,\r\n}","const pipe = (...functions) => {\r\n    return (first) => functions.reduce((acc, fn) => fn(acc), first);\r\n}\r\n\r\nexport default pipe;","import {GuardianError} from \"../error\";\r\n\r\nconst GUARD_STRING_MESSAGE = 'VAL must be a string'\r\n\r\nexport default (errorMessage = GUARD_STRING_MESSAGE) => {\r\n    return function(val){\r\n        if (typeof val !== \"string\") {\r\n            return new GuardianError(\r\n                errorMessage.replace(/VAL/g, val),\r\n                \"string\",\r\n                val,\r\n            )\r\n        }\r\n        return val\r\n    }\r\n}"],"names":["GuardianError","Error","constructor","message","guard","value","super","this","name","parse","schema","data","result","apply","key","functions","first","reduce","acc","fn","ok","error","output","errorMessage","val","replace"],"mappings":";;;;;;;;mCAAO,MAAMA,sBAAsBC,MAC/B,WAAAC,CAAYC,EAAU,GAAIC,EAAQ,KAAMC,GACpCC,MAAMH,GAENI,KAAKJ,QAAUA,EACfI,KAAKC,KAAOJ,EACZG,KAAKF,MAAQA,CAChB,ECGA,MAACI,MAAQ,CAACC,EAAQC,KACnB,IAAIC,EAEJ,IAAKF,EACD,MAAM,IAAIT,MAAM,0CAGpB,GAAsB,mBAAXS,GAEP,GADAE,EAASF,EAAOG,MAAM,KAAM,CAACF,IACzBC,aAAkBZ,cAClB,MAAMY,OAGV,IAAI,IAAIE,KAAOJ,EAAO,CAClB,MAAML,EAAQM,EAAKG,GACbV,EAAQM,EAAOI,GAErB,GAAKV,EAEL,GAAqB,mBAAVA,GAEP,GADAQ,EAASR,EAAMS,MAAM,KAAM,CAACF,IACxBC,aAAkBZ,cAClB,MAAMY,OAGVH,MAAML,EAAOC,EAEpB,CAGL,OAAOM,+BCxCE,IAAII,IACLC,GAAUD,EAAUE,QAAO,CAACC,EAAKC,IAAOA,EAAGD,IAAMF,eD0C3C,CAACN,EAAQC,KACvB,IAAIC,EAEJ,IAAKF,EACD,MAAM,IAAIT,MAAM,0CAGpB,GAAsB,mBAAXS,GAEP,GADAE,EAASF,EAAOG,MAAM,KAAM,CAACF,IACzBC,aAAkBZ,cAClB,MAAO,CACHoB,IAAI,EACJC,MAAOT,QAIf,IAAI,IAAIE,KAAOJ,EAAO,CAClB,MAAML,EAAQM,EAAKG,GACbV,EAAQM,EAAOI,GAErB,GAAKV,EAEL,GAAqB,mBAAVA,GAEP,GADAQ,EAASR,EAAMS,MAAM,KAAM,CAACF,IACxBC,aAAkBZ,cAClB,MAAO,CACHoB,IAAI,EACJC,MAAOT,QAIfH,MAAML,EAAOC,EAEpB,CAGL,MAAO,CACHe,IAAI,EACJE,OAAQX,EACX,WE9EU,CAACY,EAFa,yBAGlB,SAASC,GACZ,MAAmB,iBAARA,EACA,IAAIxB,cACPuB,EAAaE,QAAQ,OAAQD,GAC7B,SACAA,GAGDA,CACV"}